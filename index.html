<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>document</title>
    <link rel="stylesheet" href="styles/common.css">
</head>
<body>


<div id="scene1">
    <div class="man"></div>
    <div class="title"></div>
    <button class="rule"></button>
    <button class="start"></button>
</div>

<div id="scene2">
    <div class="countdown">
    </div>
    <div class="jigsaw"></div>
    <button class="btn-preview"></button>
</div>

<!-- 公共引用 -->
<script src="js/lib/hotcss.js"></script>
<script src="js/lib/zepto.js"></script>
<script src="js/lib/touch.js"></script>
<link rel="stylesheet" href="js/lib/dialog/game-dialog.css">
<script src="js/lib/dialog/game-dialog.js"></script>


<div class="lottery-layer swiper-container">
    <div class="swiper-wrapper">
        <div class="swiper-slide">
            <div class="panel">
                <div class="badge badge-game-fail"></div>
                <h3>挑战失败, 再玩一次</h3>

                <div class="actions">
                    <button data-type="replay" class="btn btn-default">再玩一次</button>
                </div>
            </div>
        </div>
        <div class="swiper-slide">
            <div class="panel">
                <div class="badge badge-game"></div>
                <h3>获得抽奖机会: <span>X1</span></h3>

                <div class="actions">
                    <button data-type="game" class="btn btn-primary">立即抽奖</button>
                    <button data-type="replay" class="btn btn-default">再玩一次</button>
                </div>
            </div>
        </div>
        <div class="swiper-slide">
            <div class="panel">
                <div class="badge badge-collect"></div>
                <h3>收藏宝贝获得抽奖机会</h3>

                <div class="actions">
                    <button data-type="collect" class="btn btn-primary">收藏抽奖</button>
                </div>
            </div>
        </div>
        <div class="swiper-slide">
            <div class="panel">
                <div class="badge badge-shopping"></div>
                <h3>加购物车获得抽奖机会</h3>

                <div class="actions">
                    <button data-type="shopping" class="btn btn-primary">加购抽奖</button>
                </div>
            </div>
        </div>
    </div>

    <div class="swiper-pagination"></div>
    <div class="tips">滑动获得抽奖机会</div>

    <div class="goods-list">
        <h1 class="title">
            <a href="javascript:" class="close">×</a>

            加入购物车
        </h1>
        <h3 class="sub-title">收藏任意宝贝, 可获得抽奖机会</h3>
        <ul>
            <li>
                <img src="https://img.alicdn.com/bao/uploaded/i4/TB1707PNXXXXXbcXXXXXXXXXXXX_!!0-item_pic.jpg_430x430q90.jpg">
                <div class="title">
                    商品商品商品商品商品商品商品商品商品
                </div>
                <button class="btn btn-primary">加入购物车</button>
            </li>
            <li>
                <img src="https://img.alicdn.com/bao/uploaded/i4/TB1707PNXXXXXbcXXXXXXXXXXXX_!!0-item_pic.jpg_430x430q90.jpg">
                <div class="title">
                    商品商品商品商品商品商品商品商品商品
                </div>
                <button class="btn btn-primary">加入购物车</button>
            </li>
            <li>
                <img src="https://img.alicdn.com/bao/uploaded/i4/TB1707PNXXXXXbcXXXXXXXXXXXX_!!0-item_pic.jpg_430x430q90.jpg">
                <div class="title">
                    商品商品商品商品商品商品商品商品商品
                </div>
                <button class="btn btn-primary">加入购物车</button>
            </li>
            <li>
                <img src="https://img.alicdn.com/bao/uploaded/i4/TB1707PNXXXXXbcXXXXXXXXXXXX_!!0-item_pic.jpg_430x430q90.jpg">
                <div class="title">
                    商品商品商品商品商品商品商品商品商品
                </div>
                <button class="btn btn-primary">加入购物车</button>
            </li>
            <li>
                <img src="https://img.alicdn.com/bao/uploaded/i4/TB1707PNXXXXXbcXXXXXXXXXXXX_!!0-item_pic.jpg_430x430q90.jpg">
                <div class="title">
                    商品商品商品商品商品商品商品商品商品
                </div>
                <button class="btn btn-primary">加入购物车</button>
            </li>
        </ul>
    </div>
</div>

<!-- lottery -->
<link rel="stylesheet" href="js/lib/swiper/css/swiper.css">
<script src="js/lib/swiper/js/swiper.jquery.js"></script>

<link rel="stylesheet" href="js/lib/lottery-layer/lottery-layer.css">
<script src="js/lib/lottery-layer/lottery-layer.js"></script>


<script src="js/lib/Watcher.js"></script>
<script src="js/tools/tools.js"></script>
<script src="js/lib/collisionChecker.js"></script>
<script src="js/lib/Dragify.js"></script>
<script src="js/lib/Countdown.js"></script>
<script src="js/lib/ani-queue.js"></script>

<script>
    window.GAME_PARAMS = {
        items: [
            {picUrl: '//img.alicdn.com/bao/uploaded/i2/TB1B0PbNpXXXXbrXVXXXXXXXXXX_!!0-item_pic.jpg'},
            {picUrl: '//img.alicdn.com/tps/TB1MSEbMVXXXXa6XFXXXXXXXXXX-360-280.jpg'},
        ],
        time : 6000000,
        sizeX: 3,
        sizeY: 3
    }

    var gameWatcher = window.gameWatcher = new Watcher()

    /**
     * 带*的为emit类型
     *
     * scene:
     *   ready 加载完毕
     *   start 点击开始
     *   win   通过
     *   fail  失败
     *
     * show:
     *   rule 规则
     *
     * game:
     *   *play   开始
     *   *replay 重玩
     */
    gameWatcher
            .on('scene:ready', function () {
                console.log('ready')
            })
            .on('scene:start', function () {
                gameWatcher.emit('game:play')
            })
            .on('show:rule', function () {
                console.log('rule')
            })
            .on('scene:win', function (time) {
                console.log('win', time)
                alert('win')
            })
            .on('scene:fail', function () {
                console.log('fail')
                gameWatcher.emit('game:replay')
                alert('fail')
            })
</script>
<script src="js/app/Scene1.js"></script>
<script src="js/app/Scene2.js"></script>
<script src="js/main.js"></script>
</body>
</html>